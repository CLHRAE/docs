"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[219],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return f}});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),p=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=p(e.components);return o.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),f=r,g=d["".concat(s,".").concat(f)]||d[f]||u[f]||a;return t?o.createElement(g,i(i({ref:n},l),{},{components:t})):o.createElement(g,i({ref:n},l))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=d;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<a;p++)i[p]=t[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7174:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return l},default:function(){return d}});var o=t(7462),r=t(3366),a=(t(7294),t(3905)),i=["components"],c={sidebar_position:3},s="Updating the config of a DAO",p={unversionedId:"recipes/config-updates",id:"recipes/config-updates",title:"Updating the config of a DAO",description:"After you've deployed your DAO you may decide that you'd like to",source:"@site/docs/recipes/config-updates.md",sourceDirName:"recipes",slug:"/recipes/config-updates",permalink:"/docs/recipes/config-updates",editUrl:"https://github.com/DA0-DA0/docs/tree/main/docs/docs/recipes/config-updates.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Deploying a smart contract from a DAO",permalink:"/docs/recipes/contract-deployment"}},l=[{value:"Setup",id:"setup",children:[],level:2},{value:"The DAO DAO config",id:"the-dao-dao-config",children:[],level:2},{value:"Updating the config",id:"updating-the-config",children:[],level:2},{value:"Executing the config update",id:"executing-the-config-update",children:[],level:2}],u={toc:l};function d(e){var n=e.components,t=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"updating-the-config-of-a-dao"},"Updating the config of a DAO"),(0,a.kt)("p",null,"After you've deployed your DAO you may decide that you'd like to\nchange parts of the config."),(0,a.kt)("p",null,"In this recipe, we'll walk through the process of creating and voting\non a proposal to change your DAO's configuration."),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("p",null,"Before beginning you'll need to have a DAO deployed on DAO-DAO. For a\nquick introduction to that see the\n",(0,a.kt)("a",{parentName:"p",href:"../quickstart/create-a-dao"},"quickstart")," guide."),(0,a.kt)("h2",{id:"the-dao-dao-config"},"The DAO DAO config"),(0,a.kt)("p",null,"All DAOs deployed from DAO DAO have a config with information like\nname, description, and voting threshold. You can view the raw JSON of\na DAOs config from the command line by running a ",(0,a.kt)("inlineCode",{parentName:"p"},"{get_config: {}}"),"\nquery like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"junod query wasm contract-state smart <DAO ADDRESS> '{\"get_config\": {}}'\n")),(0,a.kt)("p",null,"Here's an example of what one of those configs might look like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "config": {\n    "name": "ekez dao",\n    "description": "The first DAO of the new DAO DAO UI!",\n    "threshold": {\n      "absolute_percentage": {\n        "percentage": "0.66"\n      }\n    },\n    "max_voting_period": {\n      "time": 604800\n    },\n    "proposal_deposit": "0",\n    "refund_failed_proposals": true\n  },\n  "gov_token": "juno1lnrdwhf4xcx6w6tdpsghgv6uavem353gtgz77sdreyhts883wdjqpg7dk8",\n  "staking_contract": "juno19nywm4al2pc2sdj834gtdm6tvcn5kqpghlwd022tvld0hek4jfes8jj6um"\n}\n')),(0,a.kt)("p",null,"Every part of this config can be updated via a governance proposal."),(0,a.kt)("h2",{id:"updating-the-config"},"Updating the config"),(0,a.kt)("p",null,"To update a DAO's config we'll create a new proposal in the UI and add\na \"Custom\" message to it. Our custom message will be a WASM message\nwhich, when executed, will call the ",(0,a.kt)("inlineCode",{parentName:"p"},"update_config")," method on our DAO."),(0,a.kt)("p",null,"The structure of a WASM Message can be found\n",(0,a.kt)("a",{parentName:"p",href:"https://docs.rs/cosmwasm-std/latest/cosmwasm_std/enum.WasmMsg.html"},"here"),". We'll\nstart by filling out most of the execute variant:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "wasm": {\n    "execute": {\n      "contract_addr": "<DAO ADDRESS>",\n      "msg": {}, // TODO - fill this in\n      "funds": []\n  }\n}\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"update_config")," message that we'll be executing with this has the\nsame structure as a DAOs config. To change only a few fields I\nrecommend copying your DAOs current config and then only modifying the\nfields that you'd like to change. Here's an example of what your\n",(0,a.kt)("inlineCode",{parentName:"p"},"update_config")," message might look like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "update_config": {\n    "name": "ekez dao",\n    "description": "The first DAO of the new DAO DAO UI outside a docker container!",\n    "threshold": {\n      "absolute_percentage": {\n        "percentage": "0.66"\n      }\n    },\n    "max_voting_period": {\n      "time": 604800\n    },\n    "proposal_deposit": "0",\n    "refund_failed_proposals": true\n  }\n}\n')),(0,a.kt)("p",null,"Here I've updated the DAO's description to clarify that there were in\nfact other DAOs before this one but they all ran in Docker containers."),(0,a.kt)("p",null,"To finish up we just combine our WASM Message and our ",(0,a.kt)("inlineCode",{parentName:"p"},"update_config"),"\nmessage by putting the ",(0,a.kt)("inlineCode",{parentName:"p"},"update_config")," message into the ",(0,a.kt)("inlineCode",{parentName:"p"},"msg")," field of\nthe WASM Message:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "wasm": {\n    "execute": {\n      "contract_addr": "<DAO ADDRESS>",\n      "msg": {\n        "update_config": {\n          "name": "ekez dao",\n          "description": "The first DAO of the new DAO DAO UI outside a docker container!",\n          "threshold": {\n            "absolute_percentage": {\n              "percentage": "0.66"\n            }\n          },\n          "max_voting_period": {\n            "time": 604800\n          },\n          "proposal_deposit": "0",\n          "refund_failed_proposals": true\n        }\n      },\n      "funds": []\n    }\n  }\n}\n')),(0,a.kt)("h2",{id:"executing-the-config-update"},"Executing the config update"),(0,a.kt)("p",null,"To execute the config update just finish creating your proposal and\nhold a vote with your fellow DAO members. If the proposal passes you\ncan execute it and you'll have a new DAO config!"))}d.isMDXComponent=!0}}]);